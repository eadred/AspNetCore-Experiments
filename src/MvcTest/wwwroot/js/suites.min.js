!function(){"use strict";angular.module("suites",["ui.bootstrap"])}(),function(){"use strict";function e(e,t){var o=this;o.title=t.title,o.content=t.content,o.cancelBtnText=t.cancelBtnText?t.cancelBtnText:"Cancel",o.acceptBtnText=t.acceptBtnText?t.acceptBtnText:"Accept",o.cancel=function(){e.dismiss()},o.accept=function(){e.close()}}angular.module("suites").controller("ConfirmDialogController",e)}(),function(){"use strict";function e(e,t,o){function n(e){var t=e.constructor();return r(e,t),t}function r(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function l(){var e=!0,t={hasNameError:!1,hasLogoError:!1};return""==i.editItem.name&&(t.hasNameError=!0,t.nameErrorDescription="Name cannot be blank",e=!1),i.logoFile&&!i.logoFile.type.match("image/.*")&&(t.hasLogoError=!0,t.logoErrorDescription="Logo must be an image",e=!1),i.errorDetails=t,e}var i=this;i.editItem=n(o),i.cancel=function(){t.dismiss()},i.save=function(){l()&&t.close({editedModel:i.editItem,logoFile:i.logoFile})},i.fileSelected=function(t){t.length>0?i.logoFile=t[0]:delete i.logoFile,l(),e.$apply()},l()}angular.module("suites").controller("EditModelDialogController",e)}(),function(){"use strict";function e(e,t){function o(e){var t=e.constructor();return n(e,t),t}function n(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function r(){return""==l.editItem.name?(l.errorDetails={hasError:!0,errorDescription:"Name cannot be blank"},!1):(l.errorDetails={hasError:!1},!0)}var l=this;l.editItem=o(t),l.cancel=function(){e.dismiss()},l.save=function(){r()&&e.close(l.editItem)},r()}angular.module("suites").controller("EditSuiteDialogController",e)}(),function(){"use strict";function e(e,t){var o=this;o.errorMsg=t,o.dismiss=function(){e.dismiss()}}angular.module("suites").controller("ErrorDialogController",e)}(),function(){"use strict";function e(e,t){function o(){e.get("/api/Suites").then(function(e){i.suites=e.data;for(var t=0;t<i.suites.length;t++)for(var o=i.suites[t],n=0;n<o.models.length;n++)o.models[n].logoNonce=Math.round(999999*Math.random())})}function n(o,n,r){var i="/api/Suites/"+o+"/Models",a="POST";r||(i=i+"/"+n.modelId,a="PUT");var u=t.open({controller:"EditModelDialogController",controllerAs:"dlgCtrl",templateUrl:"editModelDialog.html",resolve:{editItem:n}});l(u,function(t){var o=t.editedModel,n=new FormData;return n.append("model",JSON.stringify(o)),n.append("logoFile",t.logoFile),e({method:a,url:i,data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity})})}function r(e){t.open({controller:"ErrorDialogController",controllerAs:"dlgCtrl",templateUrl:"editError.html",resolve:{errorMsg:function(){return e}}})}function l(e,t){e.result.then(t).then(function(e){o()},function(e){var t=e.data.errorMsg?e.data.errorMsg:"Unknown error ("+e.status+")";r(t)})}var i=this;i.suites=[],i.addSuite=function(){var o={suiteId:-1,name:"New Suite",models:[]},n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});l(n,function(t){return e.post("/api/Suites",t)})},i.addModel=function(e){n(e,{modelId:-1,name:"New Model"},!0)},i.editSuite=function(o){var n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});l(n,function(t){return e.put("/api/Suites/"+t.suiteId,t)})},i.editModel=function(e,t){n(e,t,!1)},i.deleteSuite=function(o){var n=t.open({controller:"ConfirmDialogController",controllerAs:"dlgCtrl",templateUrl:"confirmDialog.html",resolve:{options:{title:"Confirm deletion",content:"Are you sure you want to delete suite "+o.name+"?",cancelBtnText:"Don't delete",acceptBtnText:"Delete"}}});l(n,function(){return e.delete("/api/Suites/"+o.suiteId)})},i.deleteModel=function(o,n){var r=t.open({controller:"ConfirmDialogController",controllerAs:"dlgCtrl",templateUrl:"confirmDialog.html",resolve:{options:{title:"Confirm deletion",content:"Are you sure you want to delete model "+n.name+"?",cancelBtnText:"Don't delete",acceptBtnText:"Delete"}}});l(r,function(){return e.delete("/api/Suites/"+o+"/Models/"+n.modelId)})},i.modelLogoSource=function(e,t){return"/api/Suites/"+e+"/Models/"+t.modelId+"/logo?r="+t.logoNonce},o()}angular.module("suites").controller("MainController",["$http","$uibModal",e])}();