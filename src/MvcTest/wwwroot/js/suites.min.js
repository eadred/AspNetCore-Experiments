!function(){"use strict";angular.module("suites",["ui.bootstrap","common"])}(),function(){"use strict";function e(e,t,o){function n(e){var t=e.constructor();return r(e,t),t}function r(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function i(){var e=!0,t={hasNameError:!1,hasLogoError:!1};return""==l.editItem.name&&(t.hasNameError=!0,t.nameErrorDescription="Name cannot be blank",e=!1),l.logoFile&&!l.logoFile.type.match("image/.*")&&(t.hasLogoError=!0,t.logoErrorDescription="Logo must be an image",e=!1),l.errorDetails=t,e}var l=this;l.editItem=n(o),l.cancel=function(){t.dismiss()},l.save=function(){i()&&t.close({editedModel:l.editItem,logoFile:l.logoFile})},l.fileSelected=function(t){t.length>0?l.logoFile=t[0]:delete l.logoFile,i(),e.$apply()},i()}angular.module("suites").controller("EditModelDialogController",["$scope","$uibModalInstance","editItem",e])}(),function(){"use strict";function e(e,t){function o(e){var t=e.constructor();return n(e,t),t}function n(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function r(){return""==i.editItem.name?(i.errorDetails={hasError:!0,errorDescription:"Name cannot be blank"},!1):(i.errorDetails={hasError:!1},!0)}var i=this;i.editItem=o(t),i.cancel=function(){e.dismiss()},i.save=function(){r()&&e.close(i.editItem)},r()}angular.module("suites").controller("EditSuiteDialogController",["$uibModalInstance","editItem",e])}(),function(){"use strict";function e(e,t,o){function n(){e.get("/api/Suites").then(function(e){a.suites=e.data;for(var t=0;t<a.suites.length;t++)for(var o=a.suites[t],n=0;n<o.models.length;n++)o.models[n].logoNonce=Math.round(999999*Math.random())})}function r(o,n,r){var i="/api/Suites/"+o+"/Models",a="POST";r||(i=i+"/"+n.modelId,a="PUT");var u=t.open({controller:"EditModelDialogController",controllerAs:"dlgCtrl",templateUrl:"editModelDialog.html",resolve:{editItem:n}});l(u,function(t){var o=t.editedModel,n=new FormData;return n.append("model",JSON.stringify(o)),n.append("logoFile",t.logoFile),e({method:a,url:i,data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity})})}function i(e){return o.showConfirmation({title:"Confirm deletion",content:e,cancelBtnText:"Don't delete",acceptBtnText:"Delete"})}function l(e,t){e.result.then(t).then(function(e){n()},function(e){if(e){var t=e.data.errorMsg?e.data.errorMsg:"Unknown error ("+e.status+")";o.showError(t)}})}var a=this;a.suites=[],a.addSuite=function(){var o={suiteId:-1,name:"New Suite",models:[]},n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});l(n,function(t){return e.post("/api/Suites",t)})},a.addModel=function(e){r(e,{modelId:-1,name:"New Model"},!0)},a.editSuite=function(o){var n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});l(n,function(t){return e.put("/api/Suites/"+t.suiteId,t)})},a.editModel=function(e,t){r(e,t,!1)},a.deleteSuite=function(t){var o=i("Are you sure you want to delete suite "+t.name+"?");l(o,function(){return e.delete("/api/Suites/"+t.suiteId)})},a.deleteModel=function(t,o){var n=i("Are you sure you want to delete model "+o.name+"?");l(n,function(){return e.delete("/api/Suites/"+t+"/Models/"+o.modelId)})},a.modelLogoSource=function(e,t){return"/api/Suites/"+e+"/Models/"+t.modelId+"/logo?r="+t.logoNonce},n()}angular.module("suites").controller("SuitesController",["$http","$uibModal","DialogService",e])}();