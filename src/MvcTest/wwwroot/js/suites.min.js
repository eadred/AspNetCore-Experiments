!function(){"use strict";angular.module("suites",["ui.bootstrap"])}(),function(){"use strict";function e(e,t){var o=this;o.title=t.title,o.content=t.content,o.cancelBtnText=t.cancelBtnText?t.cancelBtnText:"Cancel",o.acceptBtnText=t.acceptBtnText?t.acceptBtnText:"Accept",o.cancel=function(){e.dismiss()},o.accept=function(){e.close()}}angular.module("suites").controller("ConfirmDialogController",e)}(),function(){"use strict";function e(e,t){function o(e){var t=e.constructor();return n(e,t),t}function n(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function r(){return""==l.editItem.name?(l.errorDetails={hasNameError:!0,eameErrorDescription:"Name cannot be blank"},!1):(l.errorDetails={hasNameError:!1},!0)}var l=this;l.editItem=o(t),l.cancel=function(){e.dismiss()},l.save=function(){r()&&e.close({editedModel:l.editItem,logoFile:l.logoFile})},l.fileSelected=function(e){e.length>0?l.logoFile=e[0]:delete l.logoFile},r()}angular.module("suites").controller("EditModelDialogController",e)}(),function(){"use strict";function e(e,t){function o(e){var t=e.constructor();return n(e,t),t}function n(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])}function r(){return""==l.editItem.name?(l.errorDetails={hasError:!0,errorDescription:"Name cannot be blank"},!1):(l.errorDetails={hasError:!1},!0)}var l=this;l.editItem=o(t),l.cancel=function(){e.dismiss()},l.save=function(){r()&&e.close(l.editItem)},r()}angular.module("suites").controller("EditSuiteDialogController",e)}(),function(){"use strict";function e(e,t){var o=this;o.errorMsg=t,o.dismiss=function(){e.dismiss()}}angular.module("suites").controller("ErrorDialogController",e)}(),function(){"use strict";function e(e,t){function o(){e.get("/api/Suites").then(function(e){l.suites=e.data;for(var t=0;t<l.suites.length;t++)for(var o=l.suites[t],n=0;n<o.models.length;n++)o.models[n].logoNonce=Math.round(999999*Math.random())})}function n(e){t.open({controller:"ErrorDialogController",controllerAs:"dlgCtrl",templateUrl:"editError.html",resolve:{errorMsg:function(){return e}}})}function r(e,t){e.result.then(t).then(function(e){o()},function(e){var t=e.data.errorMsg?e.data.errorMsg:"Unknown error ("+e.status+")";n(t)})}var l=this;l.suites=[],l.addSuite=function(){var o={suiteId:-1,name:"New Suite",models:[]},n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});r(n,function(t){return e.post("/api/Suites",t)})},l.addModel=function(o){var n={modelId:-1,name:"New Model"},l=t.open({controller:"EditModelDialogController",controllerAs:"dlgCtrl",templateUrl:"editModelDialog.html",resolve:{editItem:n}});r(l,function(t){var n=t.editedModel;return e.post("/api/Suites/"+o+"/Models",n)})},l.editSuite=function(o){var n=t.open({controller:"EditSuiteDialogController",controllerAs:"dlgCtrl",templateUrl:"editSuiteDialog.html",resolve:{editItem:o}});r(n,function(t){return e.put("/api/Suites/"+t.suiteId,t)})},l.editModel=function(o,n){var l=t.open({controller:"EditModelDialogController",controllerAs:"dlgCtrl",templateUrl:"editModelDialog.html",resolve:{editItem:n}});r(l,function(t){var n=t.editedModel,r=new FormData;return r.append("model",JSON.stringify(n)),r.append("logoFile",t.logoFile),e.put("/api/Suites/"+o+"/Models/"+n.modelId,r,{headers:{"Content-Type":void 0},transformRequest:angular.identity})})},l.deleteSuite=function(o){var n=t.open({controller:"ConfirmDialogController",controllerAs:"dlgCtrl",templateUrl:"confirmDialog.html",resolve:{options:{title:"Confirm deletion",content:"Are you sure you want to delete suite "+o.name+"?",cancelBtnText:"Don't delete",acceptBtnText:"Delete"}}});r(n,function(){return e.delete("/api/Suites/"+o.suiteId)})},l.deleteModel=function(o,n){var l=t.open({controller:"ConfirmDialogController",controllerAs:"dlgCtrl",templateUrl:"confirmDialog.html",resolve:{options:{title:"Confirm deletion",content:"Are you sure you want to delete model "+n.name+"?",cancelBtnText:"Don't delete",acceptBtnText:"Delete"}}});r(l,function(){return e.delete("/api/Suites/"+o+"/Models/"+n.modelId)})},l.modelLogoSource=function(e,t){return"/api/Suites/"+e+"/Models/"+t.modelId+"/logo?r="+t.logoNonce},o()}angular.module("suites").controller("MainController",["$http","$uibModal",e])}();